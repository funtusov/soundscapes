<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EtherPad Soundscape</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <!-- Start Overlay -->
    <div id="overlay">
        <h1 class="text-3xl mb-2 font-light tracking-widest text-white">ETHERPAD</h1>
        <p class="mb-8 text-gray-400 text-sm">Headphones Recommended</p>
        <button id="startBtn" class="btn">Initialize System</button>
    </div>

    <!-- HUD -->
    <div class="hud hud-tl">
        Freq: <span id="val-freq">--</span><br>
        LPF Cutoff: <span id="val-tilt">--</span>
    </div>
    <div class="hud hud-tr">
        Harm: <span id="val-harm">--</span><br>
        Motion: <span id="val-motion">--</span>
    </div>

    <canvas id="canvas"></canvas>

    <!-- Scale Controls -->
    <div class="scale-controls" id="scaleControls" style="display: none;">
        <button class="quantize-btn" id="quantizeBtn">Quantize</button>
        <div class="scale-options" id="scaleOptions">
            <select id="tonicSelect" class="scale-select">
                <option value="0">C</option>
                <option value="1">C#</option>
                <option value="2">D</option>
                <option value="3">D#</option>
                <option value="4">E</option>
                <option value="5">F</option>
                <option value="6">F#</option>
                <option value="7">G</option>
                <option value="8">G#</option>
                <option value="9" selected>A</option>
                <option value="10">A#</option>
                <option value="11">B</option>
            </select>
            <select id="scaleSelect" class="scale-select">
                <option value="major">Major</option>
                <option value="minor" selected>Minor</option>
                <option value="pentatonic">Penta</option>
                <option value="chromatic">Chromatic</option>
            </select>
        </div>
    </div>

    <!-- Loop Controls -->
    <div class="loop-controls" id="loopControls" style="display: none;">
        <button class="loop-btn" id="loopRecordBtn" title="Record">
            <span class="loop-icon">●</span>
        </button>
        <button class="loop-btn" id="loopPlayBtn" title="Play" disabled>
            <span class="loop-icon">▶</span>
        </button>
        <button class="loop-btn" id="loopClearBtn" title="Clear" disabled>
            <span class="loop-icon">✕</span>
        </button>
        <span class="loop-status" id="loopStatus">--</span>
    </div>

    <!-- Beats Controls (for Beats mode) -->
    <div class="beats-controls" id="beatsControls" style="display: none;">
        <button class="beats-play-btn" id="beatsPlayBtn">▶</button>
        <div class="tempo-control">
            <span class="tempo-label">BPM</span>
            <input type="range" id="tempoSlider" min="40" max="200" value="105" class="tempo-slider">
            <span class="tempo-value" id="tempoValue">105</span>
        </div>
        <div class="volume-control">
            <span class="volume-label">Vol</span>
            <input type="range" id="beatsVolumeSlider" min="0" max="100" value="70" class="volume-slider">
        </div>
    </div>

    <!-- Texture Controls (secondary bar when active) -->
    <div class="texture-controls" id="textureControls" style="display: none;">
        <button class="texture-btn" id="noiseBtn">Waves</button>
        <button class="texture-btn" id="tapeBtn">Tape</button>
        <div class="volume-control">
            <span class="volume-label">Tex</span>
            <input type="range" id="textureVolumeSlider" min="0" max="100" value="20" class="volume-slider">
        </div>
        <div class="volume-control">
            <span class="volume-label">Vol</span>
            <input type="range" id="volumeSlider" min="0" max="100" value="100" class="volume-slider">
        </div>
    </div>

    <!-- Mode Selector (main bottom bar) -->
    <div class="mode-selector" id="modeSelector" style="display: none;">
        <select class="mode-select" id="modeSelect">
            <option value="focus">Focus</option>
            <option value="relaxation">Relax</option>
            <option value="beats">Beats</option>
            <option value="wavetable">Wave</option>
            <option value="fm">FM</option>
            <option value="arpeggiator">Arp</option>
            <option value="karplus">String</option>
            <option value="formant">Voice</option>
            <option value="ambient">Ambient</option>
        </select>
        <button class="effect-btn" id="reverbBtn">Reverb</button>
        <button class="loop-toggle-btn" id="loopToggleBtn" title="Loop">⟳</button>
    </div>

    <!-- Effects Controls (hidden, functionality moved to main bar) -->
    <div class="effects-controls" id="effectsControls" style="display: none;"></div>

    <script type="module" src="/src/main.ts"></script>
</body>
</html>
